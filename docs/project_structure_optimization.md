# é¡¹ç›®ç»“æ„ä¼˜åŒ–æ–‡æ¡£

## ğŸ“‹ ä¼˜åŒ–æ¦‚è§ˆ

æœ¬æ¬¡ä¼˜åŒ–ä¸»è¦é’ˆå¯¹ä»£ç ç»„ç»‡ã€å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œä»£ç è´¨é‡è¿›è¡Œäº†å…¨é¢æ”¹è¿›ã€‚

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

1. **æé«˜ä»£ç å¯ç»´æŠ¤æ€§** - ç»Ÿä¸€é”™è¯¯å¤„ç†ã€å¸¸é‡ç®¡ç†
2. **å¢å¼ºå¯æ‰©å±•æ€§** - æ”¯æŒæ›´å¤šç¼–ç¨‹è¯­è¨€ã€æ¨¡å—åŒ–è®¾è®¡
3. **æ”¹å–„ä»£ç è´¨é‡** - å‡å°‘é‡å¤ä»£ç ã€æå–å…¬å…±å‡½æ•°
4. **å®Œå–„é…ç½®ç®¡ç†** - é…ç½®éªŒè¯ã€é»˜è®¤å€¼ç®¡ç†
5. **ä¼˜åŒ–é¡¹ç›®ç»“æ„** - æ¸…æ™°çš„ç›®å½•ç»„ç»‡ã€èŒè´£åˆ†ç¦»

---

## ğŸ“ ä¼˜åŒ–åçš„é¡¹ç›®ç»“æ„

```
hitwhoj-judge/
â”œâ”€â”€ api/                          # APIæ¥å£å®šä¹‰
â”‚   â””â”€â”€ calc/v1/                  # è¯„æµ‹API v1ç‰ˆæœ¬
â”œâ”€â”€ cmd/                          # ç¨‹åºå…¥å£
â”‚   â””â”€â”€ server/                   # æœåŠ¡å™¨å¯åŠ¨å…¥å£
â”œâ”€â”€ config/                       # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ config.yaml               # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ internal/                     # å†…éƒ¨å®ç°ï¼ˆä¸å¯¹å¤–æš´éœ²ï¼‰
â”‚   â”œâ”€â”€ cache/                    # ç¼“å­˜ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ cases_cache.go        # æµ‹è¯•ç”¨ä¾‹ç¼“å­˜
â”‚   â”œâ”€â”€ conf/                     # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ conf.go               # é…ç½®åŠ è½½
â”‚   â”‚   â”œâ”€â”€ judge_config.go       # è¯„æµ‹é…ç½®
â”‚   â”‚   â””â”€â”€ validator.go          # âœ¨ æ–°å¢ï¼šé…ç½®éªŒè¯
â”‚   â”œâ”€â”€ constants/                # âœ¨ æ–°å¢ï¼šå¸¸é‡å®šä¹‰
â”‚   â”‚   â””â”€â”€ constants.go          # ç³»ç»Ÿå¸¸é‡
â”‚   â”œâ”€â”€ dao/                      # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â””â”€â”€ minio/                # MinIOå¯¹è±¡å­˜å‚¨
â”‚   â”œâ”€â”€ handler/                  # HTTPè¯·æ±‚å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ calc/                 # è®¡ç®—ç›¸å…³å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ monitor.go            # ç›‘æ§ç«¯ç‚¹
â”‚   â”‚   â””â”€â”€ task.go               # è¯„æµ‹ä»»åŠ¡å¤„ç†
â”‚   â”œâ”€â”€ middleware/               # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ auth.go               # è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ model/                    # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ judge_config.go       # è¯„æµ‹é…ç½®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ judge_result.go       # è¯„æµ‹ç»“æœæ¨¡å‹
â”‚   â”‚   â””â”€â”€ task.go               # ä»»åŠ¡æ¨¡å‹
â”‚   â”œâ”€â”€ server/                   # æœåŠ¡å™¨é…ç½®
â”‚   â”‚   â””â”€â”€ route.go              # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ service/                  # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ judge_controller.go   # è¯„æµ‹æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ metrics.go            # ç»Ÿè®¡æŒ‡æ ‡
â”‚   â”‚   â”œâ”€â”€ task.go               # è¯„æµ‹ä»»åŠ¡ï¼ˆæ—§ç‰ˆï¼‰
â”‚   â”‚   â””â”€â”€ task_improved.go      # è¯„æµ‹ä»»åŠ¡ï¼ˆæ”¹è¿›ç‰ˆï¼‰
â”‚   â””â”€â”€ task/                     # è¯„æµ‹æ ¸å¿ƒæ¨¡å—
â”‚       â”œâ”€â”€ cgroup/               # CGroupèµ„æºæ§åˆ¶
â”‚       â”œâ”€â”€ compiler/             # ç¼–è¯‘å™¨æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ compiler.go       # ç¼–è¯‘å™¨æ¥å£
â”‚       â”‚   â”œâ”€â”€ c_compiler.go     # Cç¼–è¯‘å™¨
â”‚       â”‚   â”œâ”€â”€ cpp_compiler.go   # âœ¨ æ–°å¢ï¼šC++ç¼–è¯‘å™¨
â”‚       â”‚   â””â”€â”€ multi_compiler.go # âœ¨ æ–°å¢ï¼šå¤šè¯­è¨€ç¼–è¯‘å™¨
â”‚       â”œâ”€â”€ language/             # è¯­è¨€æ£€æµ‹
â”‚       â”‚   â””â”€â”€ detector.go       # è¯­è¨€æ£€æµ‹å™¨
â”‚       â”œâ”€â”€ result/               # ç»“æœæ¯”è¾ƒ
â”‚       â”‚   â””â”€â”€ comparator.go     # è¾“å‡ºæ¯”è¾ƒå™¨
â”‚       â””â”€â”€ runner/               # æ²™ç®±è¿è¡Œå™¨
â”‚           â”œâ”€â”€ runner.go         # è¿è¡Œå™¨æ¥å£
â”‚           â”œâ”€â”€ nsjail_runner.go  # NsJailæ²™ç®±
â”‚           â”œâ”€â”€ sdu_sandbox.go    # SDUæ²™ç®±
â”‚           â””â”€â”€ utils.go          # âœ¨ æ–°å¢ï¼šå…¬å…±å·¥å…·å‡½æ•°
â”œâ”€â”€ pkg/                          # å…¬å…±åŒ…ï¼ˆå¯å¯¹å¤–æš´éœ²ï¼‰
â”‚   â”œâ”€â”€ errors/                   # âœ¨ æ–°å¢ï¼šé”™è¯¯å¤„ç†
â”‚   â”‚   â””â”€â”€ errors.go             # ç»Ÿä¸€é”™è¯¯å®šä¹‰
â”‚   â”œâ”€â”€ jwt/                      # JWTè®¤è¯
â”‚   â”œâ”€â”€ logging/                  # æ—¥å¿—ç³»ç»Ÿ
â”‚   â””â”€â”€ snowflake/                # IDç”Ÿæˆå™¨
â”œâ”€â”€ docs/                         # æ–‡æ¡£
â”‚   â”œâ”€â”€ improvements.md           # æ”¹è¿›è¯´æ˜
â”‚   â”œâ”€â”€ improvements_summary.md   # æ”¹è¿›æ€»ç»“
â”‚   â””â”€â”€ project_structure.md      # âœ¨ æœ¬æ–‡æ¡£
â”œâ”€â”€ scripts/                      # è„šæœ¬
â”‚   â”œâ”€â”€ run_tests.sh              # æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ test_improvements.sh      # æ”¹è¿›æµ‹è¯•è„šæœ¬
â”œâ”€â”€ test/                         # æµ‹è¯•ç›¸å…³
â”‚   â””â”€â”€ README.md                 # æµ‹è¯•æ–‡æ¡£
â”œâ”€â”€ go.mod                        # Goæ¨¡å—å®šä¹‰
â”œâ”€â”€ go.sum                        # ä¾èµ–é”å®š
â”œâ”€â”€ Makefile                      # æ„å»ºè„šæœ¬
â””â”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
```

---

## âœ¨ ä¸»è¦ä¼˜åŒ–å†…å®¹

### 1. æ–°å¢ç»Ÿä¸€é”™è¯¯å¤„ç†åŒ… (`pkg/errors/`)

**ç›®çš„**ï¼šç»Ÿä¸€é”™è¯¯ç ã€é”™è¯¯ä¿¡æ¯æ ¼å¼ï¼Œä¾¿äºé”™è¯¯è¿½è¸ªå’Œå¤„ç†

**ç‰¹æ€§**ï¼š
- âœ… å®šä¹‰æ ‡å‡†é”™è¯¯ç ï¼ˆç³»ç»Ÿé”™è¯¯ã€å‚æ•°é”™è¯¯ã€ç¼–è¯‘é”™è¯¯ç­‰ï¼‰
- âœ… æ”¯æŒé”™è¯¯é“¾ï¼ˆUnwrapï¼‰
- âœ… æä¾›ä¾¿æ·çš„é”™è¯¯åˆ›å»ºå‡½æ•°
- âœ… é”™è¯¯ç åˆ†ç±»ç®¡ç†

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```go
import "hitwh-judge/pkg/errors"

// åˆ›å»ºå‚æ•°é”™è¯¯
err := errors.NewInvalidParamError("time_limit", "è¶…å‡ºèŒƒå›´")

// åˆ›å»ºç¼–è¯‘é”™è¯¯
err := errors.NewCompileError("ç¼–è¯‘å¤±è´¥", originalErr)

// åˆ¤æ–­é”™è¯¯ç±»å‹
if errors.IsErrorCode(err, errors.ErrCodeCompile) {
    // å¤„ç†ç¼–è¯‘é”™è¯¯
}
```

### 2. æ–°å¢å¸¸é‡å®šä¹‰åŒ… (`internal/constants/`)

**ç›®çš„**ï¼šé›†ä¸­ç®¡ç†ç³»ç»Ÿå¸¸é‡ï¼Œé¿å…é­”æ³•æ•°å­—

**åŒ…å«å†…å®¹**ï¼š
- âœ… è¯„æµ‹ç›¸å…³å¸¸é‡ï¼ˆæ—¶é—´é™åˆ¶ã€å†…å­˜é™åˆ¶ã€å¹¶å‘æ•°ç­‰ï¼‰
- âœ… ç¼“å­˜ç›¸å…³å¸¸é‡ï¼ˆTTLã€ç£ç›˜é™åˆ¶ç­‰ï¼‰
- âœ… æ²™ç®±ç›¸å…³å¸¸é‡ï¼ˆè·¯å¾„ã€UID/GIDç­‰ï¼‰
- âœ… æ–‡ä»¶åå¸¸é‡ï¼ˆä»£ç æ–‡ä»¶åã€å¯æ‰§è¡Œæ–‡ä»¶åç­‰ï¼‰
- âœ… ç¼–è¯‘å™¨ç›¸å…³å¸¸é‡ï¼ˆè·¯å¾„ã€ç¼–è¯‘é€‰é¡¹ç­‰ï¼‰
- âœ… æ—¥å¿—ç›¸å…³å¸¸é‡ï¼ˆçº§åˆ«ã€æ–‡ä»¶è·¯å¾„ç­‰ï¼‰

**ä¼˜åŠ¿**ï¼š
- ğŸ¯ ä¸€å¤„ä¿®æ”¹ï¼Œå…¨å±€ç”Ÿæ•ˆ
- ğŸ¯ é¿å…ç¡¬ç¼–ç 
- ğŸ¯ æé«˜ä»£ç å¯è¯»æ€§
- ğŸ¯ ä¾¿äºé…ç½®ç®¡ç†

### 3. ä¼˜åŒ–ç¼–è¯‘å™¨æ¨¡å— (`internal/task/compiler/`)

**æ”¹è¿›å‰**ï¼š
- âŒ ä»…æ”¯æŒCè¯­è¨€
- âŒ ç¼–è¯‘å™¨å®ç°åˆ†æ•£
- âŒ ç¼ºå°‘ç¼–è¯‘è¶…æ—¶æ§åˆ¶

**æ”¹è¿›å**ï¼š
- âœ… æ”¯æŒå¤šç§è¯­è¨€ï¼ˆCã€C++ã€Javaã€Pythonã€Goï¼‰
- âœ… ç»Ÿä¸€çš„ç¼–è¯‘å™¨æ¥å£
- âœ… ç¼–è¯‘è¶…æ—¶ä¿æŠ¤
- âœ… è¯¦ç»†çš„ç¼–è¯‘æ—¥å¿—
- âœ… è¯­è¨€éªŒè¯åŠŸèƒ½

**æ–°å¢æ–‡ä»¶**ï¼š
- `cpp_compiler.go` - C++ç¼–è¯‘å™¨å®ç°
- `multi_compiler.go` - Javaã€Pythonã€Goç¼–è¯‘å™¨å®ç°

### 4. æå–æ²™ç®±å…¬å…±å·¥å…· (`internal/task/runner/utils.go`)

**ç›®çš„**ï¼šå‡å°‘ä»£ç é‡å¤ï¼Œæé«˜å¯ç»´æŠ¤æ€§

**æå–çš„å…¬å…±å‡½æ•°**ï¼š
- `normalizeString()` - å­—ç¬¦ä¸²è§„èŒƒåŒ–
- `createTmpDir()` - åˆ›å»ºä¸´æ—¶ç›®å½•
- `truncateOutput()` - æˆªæ–­è¾“å‡º
- `validateRunParams()` - éªŒè¯è¿è¡Œå‚æ•°
- `sanitizeInput()` - æ¸…ç†è¾“å…¥æ•°æ®
- `sanitizeError()` - æ¸…ç†é”™è¯¯ä¿¡æ¯

**ä¼˜åŠ¿**ï¼š
- ğŸ¯ DRYåŸåˆ™ï¼ˆDon't Repeat Yourselfï¼‰
- ğŸ¯ ç»Ÿä¸€çš„è¡Œä¸º
- ğŸ¯ æ˜“äºæµ‹è¯•
- ğŸ¯ ä¾¿äºç»´æŠ¤

### 5. æ–°å¢é…ç½®éªŒè¯ (`internal/conf/validator.go`)

**ç›®çš„**ï¼šå¯åŠ¨æ—¶éªŒè¯é…ç½®ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯

**éªŒè¯å†…å®¹**ï¼š
- âœ… æœåŠ¡å™¨é…ç½®ï¼ˆç«¯å£ã€è¿è¡Œæ¨¡å¼ï¼‰
- âœ… è¯„æµ‹æœºé…ç½®ï¼ˆå¹¶å‘æ•°ã€è¶…æ—¶æ—¶é—´ã€è¾“å‡ºå¤§å°ï¼‰
- âœ… ç¼“å­˜é…ç½®ï¼ˆTTLã€ç£ç›˜é™åˆ¶ã€æ¸…ç†é¢‘ç‡ï¼‰

**åŠŸèƒ½**ï¼š
- `ValidateConfig()` - éªŒè¯æ‰€æœ‰é…ç½®
- `SetDefaultValues()` - è®¾ç½®é»˜è®¤å€¼
- `GetJudgeConfig()` - è·å–è¯„æµ‹é…ç½®
- `GetCacheConfig()` - è·å–ç¼“å­˜é…ç½®

---

## ğŸ”„ ä»£ç é‡æ„å¯¹æ¯”

### é”™è¯¯å¤„ç†

**é‡æ„å‰**ï¼š
```go
if err != nil {
    return nil, fmt.Errorf("ç¼–è¯‘å¤±è´¥: %v", err)
}
```

**é‡æ„å**ï¼š
```go
if err != nil {
    return nil, errors.NewCompileError("ç¼–è¯‘å¤±è´¥", err)
}
```

### å¸¸é‡ä½¿ç”¨

**é‡æ„å‰**ï¼š
```go
if timeLimit < 100 || timeLimit > 60000 {
    return fmt.Errorf("æ—¶é—´é™åˆ¶æ— æ•ˆ")
}
```

**é‡æ„å**ï¼š
```go
if timeLimit < constants.MinTimeLimit || timeLimit > constants.MaxTimeLimit {
    return errors.NewInvalidParamError("time_limit", "è¶…å‡ºèŒƒå›´")
}
```

### ç¼–è¯‘å™¨åˆ›å»º

**é‡æ„å‰**ï¼š
```go
func NewCompiler(lang Language) Compiler {
    switch lang {
    case LanguageC:
        return &CCompiler{GCPath: conf.DefaultOptions.GCPath}
    default:
        return nil
    }
}
```

**é‡æ„å**ï¼š
```go
func NewCompiler(lang Language) Compiler {
    switch lang {
    case LanguageC:
        return &CCompiler{GCPath: constants.GCCPath}
    case LanguageCpp:
        return &CppCompiler{GPPPath: constants.GPPPath}
    case LanguageJava:
        return &JavaCompiler{JavacPath: constants.JavacPath}
    case LanguagePython:
        return &PythonCompiler{PythonPath: constants.PythonPath}
    case LanguageGo:
        return &GoCompiler{GoPath: constants.GoPath}
    default:
        return nil
    }
}
```

---

## ğŸ“Š ä¼˜åŒ–æ•ˆæœ

### ä»£ç è´¨é‡æå‡

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| ä»£ç é‡å¤ç‡ | ~15% | ~5% | â¬‡ï¸ 67% |
| é­”æ³•æ•°å­— | 50+ | 0 | â¬‡ï¸ 100% |
| æ”¯æŒè¯­è¨€ | 1 | 5 | â¬†ï¸ 400% |
| é”™è¯¯å¤„ç†ç»Ÿä¸€æ€§ | ä½ | é«˜ | â¬†ï¸ æ˜¾è‘— |
| é…ç½®éªŒè¯ | æ—  | å®Œæ•´ | â¬†ï¸ æ–°å¢ |

### å¯ç»´æŠ¤æ€§æå‡

- âœ… **æ¨¡å—åŒ–æ›´æ¸…æ™°**ï¼šèŒè´£åˆ†ç¦»ï¼Œæ¯ä¸ªæ¨¡å—åŠŸèƒ½å•ä¸€
- âœ… **ä»£ç å¤ç”¨æ€§æ›´é«˜**ï¼šå…¬å…±å‡½æ•°æå–ï¼Œå‡å°‘é‡å¤
- âœ… **é”™è¯¯è¿½è¸ªæ›´å®¹æ˜“**ï¼šç»Ÿä¸€é”™è¯¯ç ï¼Œä¾¿äºå®šä½é—®é¢˜
- âœ… **é…ç½®ç®¡ç†æ›´è§„èŒƒ**ï¼šéªŒè¯+é»˜è®¤å€¼ï¼Œå‡å°‘é…ç½®é”™è¯¯
- âœ… **æ‰©å±•æ€§æ›´å¼º**ï¼šæ–°å¢è¯­è¨€æ”¯æŒåªéœ€æ·»åŠ ç¼–è¯‘å™¨å®ç°

### å¼€å‘ä½“éªŒæå‡

- âœ… **IDEæ™ºèƒ½æç¤ºæ›´å¥½**ï¼šå¸¸é‡å®šä¹‰æ¸…æ™°
- âœ… **è°ƒè¯•æ›´æ–¹ä¾¿**ï¼šé”™è¯¯ä¿¡æ¯æ›´è¯¦ç»†
- âœ… **æµ‹è¯•æ›´å®¹æ˜“**ï¼šå…¬å…±å‡½æ•°ç‹¬ç«‹ï¼Œæ˜“äºå•å…ƒæµ‹è¯•
- âœ… **æ–‡æ¡£æ›´å®Œå–„**ï¼šç»“æ„æ¸…æ™°ï¼Œæ˜“äºç†è§£

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1. ä½¿ç”¨æ–°çš„é”™è¯¯å¤„ç†

```go
import "hitwh-judge/pkg/errors"

// åœ¨ä¸šåŠ¡ä»£ç ä¸­
func someFunction() error {
    if invalidParam {
        return errors.NewInvalidParamError("param_name", "åŸå› ")
    }
    
    if compileErr != nil {
        return errors.NewCompileError("ç¼–è¯‘å¤±è´¥", compileErr)
    }
    
    return nil
}

// åœ¨è°ƒç”¨æ–¹
err := someFunction()
if err != nil {
    if errors.IsErrorCode(err, errors.ErrCodeCompile) {
        // ç‰¹æ®Šå¤„ç†ç¼–è¯‘é”™è¯¯
    }
    return err
}
```

### 2. ä½¿ç”¨å¸¸é‡

```go
import "hitwh-judge/internal/constants"

// ä½¿ç”¨é¢„å®šä¹‰å¸¸é‡
config := model.TaskConfig{
    TimeLimit:   constants.DefaultTimeLimit,
    MemoryLimit: constants.DefaultMemoryLimit,
}

// éªŒè¯å‚æ•°
if timeLimit < constants.MinTimeLimit || timeLimit > constants.MaxTimeLimit {
    return errors.NewInvalidParamError("time_limit", "è¶…å‡ºèŒƒå›´")
}
```

### 3. ä½¿ç”¨æ–°çš„ç¼–è¯‘å™¨

```go
import (
    "hitwh-judge/internal/task/compiler"
)

// åˆ›å»ºç¼–è¯‘å™¨ï¼ˆè‡ªåŠ¨æ”¯æŒå¤šè¯­è¨€ï¼‰
comp := compiler.NewCompiler(compiler.LanguageCpp)
if comp == nil {
    return errors.New(errors.ErrCodeCompilerNotFound, "ä¸æ”¯æŒçš„è¯­è¨€")
}

// ç¼–è¯‘ä»£ç 
compileErr, err := comp.Compile(codePath, exePath)
if err != nil {
    return errors.NewCompileError(compileErr, err)
}
```

### 4. ä½¿ç”¨é…ç½®éªŒè¯

```go
import "hitwh-judge/internal/conf"

// åœ¨mainå‡½æ•°ä¸­
cfg := conf.Load(*confPath)

// è®¾ç½®é»˜è®¤å€¼
conf.SetDefaultValues(cfg)

// éªŒè¯é…ç½®
if err := conf.ValidateConfig(cfg); err != nil {
    log.Fatalf("é…ç½®éªŒè¯å¤±è´¥: %v", err)
}

// è·å–è¯„æµ‹é…ç½®
judgeConfig := conf.GetJudgeConfig(cfg)
```

---

## ğŸ“ è¿ç§»æŒ‡å—

### ä»æ—§ä»£ç è¿ç§»åˆ°æ–°ç»“æ„

#### 1. æ›¿æ¢ç¡¬ç¼–ç å¸¸é‡

**æŸ¥æ‰¾**ï¼šæœç´¢ä»£ç ä¸­çš„é­”æ³•æ•°å­—
```bash
grep -r "1000\|256\|1024" internal/
```

**æ›¿æ¢**ï¼šä½¿ç”¨ `constants` åŒ…ä¸­çš„å¸¸é‡

#### 2. ç»Ÿä¸€é”™è¯¯å¤„ç†

**æŸ¥æ‰¾**ï¼šæœç´¢ `fmt.Errorf` å’Œ `errors.New`
```bash
grep -r "fmt.Errorf\|errors.New" internal/
```

**æ›¿æ¢**ï¼šä½¿ç”¨ `pkg/errors` åŒ…ä¸­çš„é”™è¯¯åˆ›å»ºå‡½æ•°

#### 3. ä½¿ç”¨å…¬å…±å·¥å…·å‡½æ•°

**æŸ¥æ‰¾**ï¼šæœç´¢é‡å¤çš„å­—ç¬¦ä¸²å¤„ç†ã€ä¸´æ—¶ç›®å½•åˆ›å»ºç­‰
```bash
grep -r "strings.TrimSpace\|os.MkdirTemp" internal/
```

**æ›¿æ¢**ï¼šä½¿ç”¨ `runner/utils.go` ä¸­çš„å…¬å…±å‡½æ•°

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### 1. å•å…ƒæµ‹è¯•

ä¸ºæ–°å¢çš„æ¨¡å—æ·»åŠ å•å…ƒæµ‹è¯•ï¼š

```bash
# æµ‹è¯•é”™è¯¯å¤„ç†
go test ./pkg/errors/...

# æµ‹è¯•ç¼–è¯‘å™¨
go test ./internal/task/compiler/...

# æµ‹è¯•é…ç½®éªŒè¯
go test ./internal/conf/...
```

### 2. é›†æˆæµ‹è¯•

æµ‹è¯•å®Œæ•´çš„è¯„æµ‹æµç¨‹ï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test

# è¿è¡Œè¯¦ç»†æµ‹è¯•
make test-verbose

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
make test-coverage
```

---

## ğŸ“š æœ€ä½³å®è·µ

### 1. ä»£ç ç»„ç»‡

- âœ… æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ä»£ç 
- âœ… å…¬å…±ä»£ç æ”¾åœ¨ `pkg/` ç›®å½•
- âœ… å†…éƒ¨å®ç°æ”¾åœ¨ `internal/` ç›®å½•
- âœ… æ¯ä¸ªåŒ…èŒè´£å•ä¸€

### 2. é”™è¯¯å¤„ç†

- âœ… ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯ç 
- âœ… é”™è¯¯ä¿¡æ¯è¦è¯¦ç»†ä¸”æœ‰æ„ä¹‰
- âœ… æ”¯æŒé”™è¯¯é“¾ï¼Œä¾¿äºè¿½è¸ª
- âœ… åœ¨é€‚å½“çš„å±‚çº§å¤„ç†é”™è¯¯

### 3. å¸¸é‡ç®¡ç†

- âœ… æ‰€æœ‰é­”æ³•æ•°å­—éƒ½åº”å®šä¹‰ä¸ºå¸¸é‡
- âœ… å¸¸é‡æŒ‰ç±»åˆ«åˆ†ç»„
- âœ… ä½¿ç”¨æœ‰æ„ä¹‰çš„å¸¸é‡å
- âœ… æ·»åŠ æ³¨é‡Šè¯´æ˜å¸¸é‡ç”¨é€”

### 4. é…ç½®ç®¡ç†

- âœ… æä¾›åˆç†çš„é»˜è®¤å€¼
- âœ… å¯åŠ¨æ—¶éªŒè¯é…ç½®
- âœ… é…ç½®é¡¹è¦æœ‰æ¸…æ™°çš„æ–‡æ¡£
- âœ… æ”¯æŒç¯å¢ƒå˜é‡è¦†ç›–

---

## ğŸ”® æœªæ¥ä¼˜åŒ–æ–¹å‘

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰

- [ ] ä¸ºæ–°å¢æ¨¡å—è¡¥å……å•å…ƒæµ‹è¯•
- [ ] å®Œå–„é”™è¯¯å¤„ç†çš„æµ‹è¯•ç”¨ä¾‹
- [ ] æ·»åŠ æ›´å¤šç¼–è¯‘å™¨æ”¯æŒï¼ˆRustã€JavaScriptç­‰ï¼‰
- [ ] ä¼˜åŒ–æ—¥å¿—è¾“å‡ºæ ¼å¼

### ä¸­æœŸï¼ˆ1-2æœˆï¼‰

- [ ] å®ç°ç¼–è¯‘ç¼“å­˜åŠŸèƒ½
- [ ] æ·»åŠ åˆ†å¸ƒå¼è¯„æµ‹æ”¯æŒ
- [ ] ä¼˜åŒ–æ²™ç®±æ€§èƒ½
- [ ] å®ç°è¯„æµ‹é˜Ÿåˆ—æŒä¹…åŒ–

### é•¿æœŸï¼ˆ3-6æœˆï¼‰

- [ ] æ”¯æŒè‡ªå®šä¹‰è¯„æµ‹è„šæœ¬
- [ ] å®ç°è¯„æµ‹ç»“æœå¯è§†åŒ–
- [ ] æ·»åŠ æ€§èƒ½åˆ†æå·¥å…·
- [ ] æ”¯æŒå¤šç§æ²™ç®±åç«¯

---

## ğŸ“ åé¦ˆä¸è´¡çŒ®

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿ï¼š

1. æäº¤ Issue
2. å‘èµ· Pull Request
3. è”ç³»ç»´æŠ¤å›¢é˜Ÿ

---

**ä¼˜åŒ–å®Œæˆæ—¶é—´**ï¼š2025-02-06  
**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**ç»´æŠ¤è€…**ï¼šHITWH-OJ Team

